# On push to main, if the latest version in CHANGELOG.md is different from the latest version tag, create a new tag, and create a new release.

when:
  - event: manual
    branch: main
  - event: push
    branch: main

steps:
  changelog:
    name: Create Tag and Release
    image: oven/bun:1.0.11
    commands:
      # For some reason, This script doesn't work in ts-node, but only in CI:
      - bun install
      - bun ./scripts/createRelease.ts
    secrets: [codeberg_access_token]
